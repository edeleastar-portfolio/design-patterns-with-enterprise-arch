

<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.0.0-rc.6/css/uikit.min.css"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.0.0-rc.6/js/uikit.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.0.0-rc.6/js/uikit-icons.min.js"></script>
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/railscasts.min.css"/>
    <script defer src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/java.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </head>
  <style>
    

body {
  font-family: "Open Sans", "Helvetica", "Helvetica Neue",  "Arial", sans-serif;
  font-size:90%;
  color: black;
}

p {
  margin: 0.5em;
}

pre code {
  font-family: "Monaco";
  font-size: 100%;
}

img {
  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
  margin:10px;
}

h1, h2, h3 {
  border-bottom:thin solid black;
  margin-bottom: 0.5em;
  margin-top: 1em;
}

h1 {
  font-style:italic;
  font-size:130%;
}

h2 {
  font-size:110%;
}

h3 {
  font-size:100%;
}



  </style>

  <body class="lab">

    
  <div class="uk-offcanvas-content">
    <div id="offcanvas-usage" uk-offcanvas>
      <div class="uk-offcanvas-bar">
        <button class="uk-offcanvas-close" type="button" uk-close></button>
        <ul class="uk-nav">
          
            
              <li>
                <a class="item" href="https://edeleastar-portfolio.github.io/design-patterns-with-enterprise-arch//topic01-context/book/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
Lab-01
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="https://edeleastar-portfolio.github.io/design-patterns-with-enterprise-arch//topic02-template-method-strategy/book-template-method-strategy/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
Lab-02
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="https://edeleastar-portfolio.github.io/design-patterns-with-enterprise-arch//topic03-command/book-a-command/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
Lab-03
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="https://edeleastar-portfolio.github.io/design-patterns-with-enterprise-arch//topic03-command/book-a-prototype/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
lab-03b
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="https://edeleastar-portfolio.github.io/design-patterns-with-enterprise-arch//topic05-observer-gof-1/book-android-1/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
Lab-05a
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="https://edeleastar-portfolio.github.io/design-patterns-with-enterprise-arch//topic05-observer-gof-1/book-android-2/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
Lab-05b
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="https://edeleastar-portfolio.github.io/design-patterns-with-enterprise-arch//topic06-gof-2-posa/book-android-3/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
Lab-06a
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="https://edeleastar-portfolio.github.io/design-patterns-with-enterprise-arch//topic06-gof-2-posa/book-android-4/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
Lab-06b
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="https://edeleastar-portfolio.github.io/design-patterns-with-enterprise-arch//topic06-gof-2-posa/book-android-6/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
Lab-06c
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="https://edeleastar-portfolio.github.io/design-patterns-with-enterprise-arch//topic07-enterprise-architecture/book-1/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
Lab-07a
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="https://edeleastar-portfolio.github.io/design-patterns-with-enterprise-arch//topic07-enterprise-architecture/book-2/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
Lab-07b
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="https://edeleastar-portfolio.github.io/design-patterns-with-enterprise-arch//topic08-design-techniques/book/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
Lab-08
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="https://edeleastar-portfolio.github.io/design-patterns-with-enterprise-arch//topic09-principles-and-styles/book/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
Lab-09
                </a>
              </li>
            
          
            
              <li>
                <a class="item" href="https://edeleastar-portfolio.github.io/design-patterns-with-enterprise-arch//topic10-architecture-patterns/book/index.html">
  <i class="fas fa-flask " style="color:#00BCD4"> </i>
Lab-10
                </a>
              </li>
            
          
        </ul>
      </div>
    </div>
  </div>


    <div uk-sticky>
      <nav class="uk-navbar">
        <div class="uk-navbar-left">
          <ul class="uk-subnav uk-background-secondary uk-subnav-pill">
            <li><a href="#offcanvas-usage" uk-icon="icon: menu" , uk-toggle title="Switch Lab" pos="bottom"
                   uk-tooltip></a></li>
            <li class="uk-active"><a href="../index.html" uk-icon="icon: chevron-up" uk-toggle title="Parent Topic"
                                     pos="bottom" uk-tooltip>Observer + Pattern Catalogues </a></li>
          </ul>
        </div>
        <div class="uk-navbar-right">
          <ul class="uk-subnav uk-background-secondary uk-subnav-pill"
              uk-switcher="connect: .switcher-container">
            
              <li><a href="#">Lab-05a</a></li>
            
              <li><a href="#">01</a></li>
            
              <li><a href="#">02</a></li>
            
              <li><a href="#">03</a></li>
            
              <li><a href="#">04</a></li>
            
              <li><a href="#">05</a></li>
            
              <li><a href="#">06</a></li>
            
              <li><a href="#">07</a></li>
            
              <li><a href="#">08</a></li>
            
              <li><a href="#">09</a></li>
            
              <li><a href="#">Exercises</a></li>
            
          </ul>
        </div>
      </nav>
    </div>

    <div class="uk-container uk-container-expand">
      <ul class="uk-switcher switcher-container">
        
          <li> <h1>Objectives</h1>
<p>Layout a new Android project with a single activity. Design this activity to permit simple sports activities to be specified. Implement the Activity class to support these controls</p>
</li>
        
          <li> <h1>Create Project</h1>
<p>Download and install the latest Android/Ecliose SDL</p>
<p>Create a new Android application, with the following properties:</p>
<p><img src="img/a01.png" alt=""></p>
<p>Note the &#39;Minimum Required SDK&#39; which may be different from the default.</p>
<p>Accept all the defaults in the wizard - except the name of the main activity:</p>
<p><img src="img/a02.png" alt="">
<img src="img/a03.png" alt="">
<img src="img/a04.png" alt=""></p>
<p>The project will look like this:</p>
<p><img src="img/a05.png" alt=""></p>
<p>With the activity_donate open in the visual designer:</p>
<p><img src="img/a06.png" alt=""></p>
<p>It is important to become familiar with the structure and purpose of the three panes surrounding the Donation &#39;canvas&#39;:</p>
<h2>Pallette:</h2>
<p><img src="img/a07.png" alt=""></p>
<h2>Outline</h2>
<p><img src="img/a08.png" alt=""></p>
<h2>Properties</h2>
<p><img src="img/a09.png" alt=""></p>
<p>These views are closely related - and you will need to monitor the information displayed there continually as you evolve the appearance of your activities screens.</p>
</li>
        
          <li> <h1>Layout Donation Activity</h1>
<p>For this lab, out objective is to reproduce in Android this feature from this web app:</p>
<p><img src="img/x08.png" alt=""></p>
<p>In eclipse, delete the current &#39;Hello World&#39; text, and drag and drop a new&#39;LargeText&#39; form widget onto the canvas. Look closely at the following:</p>
<p><img src="img/a10.png" alt=""></p>
<p>Note carefully the following features:</p>
<ul>
<li>the guides tyeing the text to the left, top and right corner</li>
<li>in Outline - the name of the control has been changed from a default to &#39;donateTitle&#39;. This is changed by selecting the item in outline, and selecting &#39;Edit ID&#39; from the context menu.</li>
<li>in Properties - where we entered &#39;Welcome Homer&#39; into the text field</li>
</ul>
<p>Recreate the above precisely.</p>
<p>A &#39;Lint warning&#39; will have popped up on the left:</p>
<p><img src="img/a11.png" alt=""></p>
<p>and accept the offered id.</p>
<p>Locate the following two files and inspect them closely:</p>
<h2>res/layout/activity_create.xml</h2>
<pre><code class="lang-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:tools=&quot;http://schemas.android.com/tools&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    android:paddingBottom=&quot;@dimen/activity_vertical_margin&quot;
    android:paddingLeft=&quot;@dimen/activity_horizontal_margin&quot;
    android:paddingRight=&quot;@dimen/activity_horizontal_margin&quot;
    android:paddingTop=&quot;@dimen/activity_vertical_margin&quot;
    tools:context=&quot;org.pacemaker.pacemaker.CreateActivity&quot;&gt;

    &lt;TextView
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:textAppearance=&quot;?android:attr/textAppearanceLarge&quot;
        android:text=&quot;@string/enter_activity_details&quot;
        android:id=&quot;@+id/CreateActivityDetails&quot;
        android:layout_alignParentTop=&quot;true&quot;
        android:layout_alignParentLeft=&quot;true&quot;
        android:layout_alignParentStart=&quot;true&quot;
        android:layout_alignParentRight=&quot;true&quot;
        android:layout_alignParentEnd=&quot;true&quot; /&gt;
&lt;/RelativeLayout&gt;</code></pre>
<h2>res/values/strings.xml</h2>
<pre><code class="lang-xml">&lt;resources&gt;
    &lt;string name=&quot;app_name&quot;&gt;Pacemaker&lt;/string&gt;
    &lt;string name=&quot;enter_activity_details&quot;&gt;Enter Activity Details&lt;/string&gt;
&lt;/resources&gt;</code></pre>
<p>Note the relationship between &#39;enter_activity_details&#39; in both files. </p>
</li>
        
          <li> <h1>Donate Button</h1>
<p>Place a button directly on to the activity - attached to the bottom of the screen as shown:</p>
<p><img src="img/a12.png" alt="Android Visual Designer"></p>
<p>Rename both the button and the text field:</p>
<p><img src="img/a13.png" alt="Outline View"></p>
<p>You can do this by selecting the item in the outline view-&gt;Go To Declaration. Enter the more meaningful names in there.</p>
<p>The resource files will now be: </p>
<h3>activity_create.xml</h3>
<pre><code class="lang-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:tools=&quot;http://schemas.android.com/tools&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    android:paddingBottom=&quot;@dimen/activity_vertical_margin&quot;
    android:paddingLeft=&quot;@dimen/activity_horizontal_margin&quot;
    android:paddingRight=&quot;@dimen/activity_horizontal_margin&quot;
    android:paddingTop=&quot;@dimen/activity_vertical_margin&quot;
    tools:context=&quot;org.pacemaker.pacemaker.CreateActivity&quot;&gt;

    &lt;TextView
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:textAppearance=&quot;?android:attr/textAppearanceLarge&quot;
        android:text=&quot;@string/enter_activity_details&quot;
        android:id=&quot;@+id/createActivityTitle&quot;
        android:layout_alignParentTop=&quot;true&quot;
        android:layout_alignParentLeft=&quot;true&quot;
        android:layout_alignParentStart=&quot;true&quot;
        android:layout_alignParentRight=&quot;true&quot;
        android:layout_alignParentEnd=&quot;true&quot; /&gt;

    &lt;Button
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:text=&quot;Create Activity&quot;
        android:id=&quot;@+id/createActivityButton&quot;
        android:layout_alignParentBottom=&quot;true&quot;
        android:layout_centerHorizontal=&quot;true&quot; /&gt;
&lt;/RelativeLayout&gt;</code></pre>
<h2>strings.xml</h2>
<pre><code class="lang-xml">&lt;resources&gt;
    &lt;string name=&quot;app_name&quot;&gt;Pacemaker&lt;/string&gt;
    &lt;string name=&quot;enter_activity_details&quot;&gt;Enter Activity Details&lt;/string&gt;
&lt;/resources&gt;</code></pre>
<p>If there is a deviation from the above - retrace your steps (delete the button) until you can match the above.</p>
<p>We can now switch our attention to the Java Activity class CreateActivity</p>
<pre><code class="lang-java">package org.pacemaker.pacemaker;

import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;

public class CreateActivity extends AppCompatActivity
{

  @Override
  protected void onCreate(Bundle savedInstanceState)
  {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_create);
  }
}</code></pre>
<p>For any &#39;controls&#39; a user can interact with we usually find it useful to associate a class member with that object. Currently we have one only on - a Button. The text fields we dont consider &#39;interactive&#39; as such, so we will not include those.</p>
<p>Insert the following new field into the class:</p>
<pre><code class="lang-java">  private Button createActivityButton;</code></pre>
<p>The class will have to be imported. The class name will always match the name in the Palette:</p>
<p><img src="img/a14.png" alt=""></p>
<p>We are free to call the variable anything we like. However, in order to keep confusion to a minimum, always call the variable by the same name you used in the Component Tree view:</p>
<p><img src="img/a13.png" alt=""></p>
<p>In onCreate - we need to initialise this variable:</p>
<pre><code class="lang-java">    createActivityButton = (Button) findViewById(R.id.createActivityButton);</code></pre>
<p>We might also add a logging message so we can have some feedback as the app launches:</p>
<pre><code>    Log.v(&quot;Pacemaker&quot;, &quot;got the CreateActivity button&quot;);</code></pre>
<p>This is the complete activity class:</p>
<pre><code class="lang-java">package org.pacemaker;

import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;
import android.widget.Button;

public class CreateActivity extends Activity
{
  private Button createActivityButton;

  @Override
  protected void onCreate(Bundle savedInstanceState)
  {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_create);

    createActivityButton = (Button) findViewById(R.id.createActivityButton);

    Log.v(&quot;Pacemaker&quot;, &quot;got the CreateActivity button&quot;);
  }

  @Override
  public boolean onCreateOptionsMenu(Menu menu)
  {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.create, menu);
    return true;
  }
}</code></pre>
<p>Finding the log message can be difficult, unless you set a filter or just a simple search for the Pacemaker string:</p>
<p><img src="img/a15.png" alt=""></p>
</li>
        
          <li> <h1>Documentation</h1>
<p>The android documentation is particularly helpful and well designed. These are the two key starting points:</p>
<ul>
<li><a href="http://developer.android.com/guide/components/index.html">http://developer.android.com/guide/components/index.html</a></li>
<li><a href="http://developer.android.com/reference/packages.html">http://developer.android.com/reference/packages.html</a></li>
</ul>
<p>The first is designed to be read though as a guide, perhaps independent of any work in eclipse. You should get into the habit of devoting an hour or two a week just reading this section.</p>
<p>The Reference guide should always be open as you are working on labs or projects, and you should make a serious effort to get to grips with at least some of the information here.</p>
<p>Taking the Button class we have just started using. We can immediately find the reference just by knowing the import statement in our Activity class:</p>
<pre><code class="lang-java">import android.widget.Button;</code></pre>
<p>.. translates to</p>
<ul>
<li><a href="http://developer.android.com/reference/android/widget/Button.html">http://developer.android.com/reference/android/widget/Button.html</a></li>
</ul>
<p>(note the last three segments match the package name). Open this page now. Read just as far as the &quot;Button Style&quot; heading. There seems to be two ways of learning when an button event occurs. The first method is using the event handler/listener - but a second easier method is also available.</p>
<p>Try this now. Bring in a new method into Donate class:</p>
<pre><code class="lang-java">  public void createActivityButtonPressed (View view)
  {
    Log.v(&quot;Pacemaker&quot;, &quot;CreateActivity Button Pressed!&quot;);
  }</code></pre>
<p>Then, edit the activity_donate xml file - and add a new attribute into the Button xml fragment:</p>
<pre><code class="lang-xml">    &lt;Button
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:text=&quot;Create Activity&quot;
        android:id=&quot;@+id/createActivityButton&quot;
        android:layout_alignParentBottom=&quot;true&quot;
        android:layout_centerHorizontal=&quot;true&quot;
        android:onClick=&quot;createActivityButtonPressed&quot;/&gt;</code></pre>
<p>(the very last entry)</p>
<p>Save everything and execute the app, and monitor the log as you press the button:</p>
<p><img src="img/a17.png" alt=""></p>
<p>We now have our first interaction working!</p>
</li>
        
          <li> <h1>Research + New Control Layout</h1>
<p>Recall the UI we are trying to implement:</p>
<p><img src="img/x18.png" alt=""></p>
<p>We need a Radio Buttons, some sort of selection/combo box + a progress bar. These can be found in various locations in the pallette:</p>
<p><img src="img/a21.png" alt=""></p>
<p>RadioGroup, ProgressBar and NumberPicker seem likely candidates. The names of these controls are exactly as advertised, and we can expect them to be in the &#39;widgets&#39; package. To verify this, try importing them at the top of the activity class:</p>
<pre><code class="lang-java">import android.widget.NumberPicker;
import android.widget.TextView;</code></pre>
<p>... and we can bring in three fields into the class:</p>
<pre><code class="lang-java">  private Button       createActivityButton;
  private TextView     activityType;
  private TextView     activityLocation;
  private NumberPicker distancePicker;</code></pre>
<p>We can also open up three pages of documentation - which we can reverse engineer from the package/class names:</p>
<ul>
<li><a href="http://developer.android.com/reference/android/widget/RadioGroup.html">http://developer.android.com/reference/android/widget/RadioGroup.html</a></li>
<li><a href="http://developer.android.com/reference/android/widget/ProgressBar.html">http://developer.android.com/reference/android/widget/ProgressBar.html</a></li>
<li><a href="http://developer.android.com/reference/android/widget/NumberPicker.html">http://developer.android.com/reference/android/widget/NumberPicker.html</a></li>
</ul>
<p>Note this time we have gone to the Activity class before actually creating the controls. We should do this now - and remember to use the same names (for the IDs) as we create the controls.</p>
<p><img src="img/a22.png" alt=""></p>
<p>Getting the layout +id names as shown above may take some practice. However, it is an essential skill to get on top of, even it it takes a lot of trial and error.</p>
<p>For reference purposes (try to do it your self), these are the relevant generated xml files:</p>
<pre><code class="lang-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:tools=&quot;http://schemas.android.com/tools&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    android:paddingBottom=&quot;@dimen/activity_vertical_margin&quot;
    android:paddingLeft=&quot;@dimen/activity_horizontal_margin&quot;
    android:paddingRight=&quot;@dimen/activity_horizontal_margin&quot;
    android:paddingTop=&quot;@dimen/activity_vertical_margin&quot;
    tools:context=&quot;org.pacemaker.pacemaker.CreateActivity&quot;&gt;

    &lt;TextView
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:textAppearance=&quot;?android:attr/textAppearanceLarge&quot;
        android:text=&quot;@string/enter_activity_details&quot;
        android:id=&quot;@+id/createActivityTitle&quot;
        android:layout_alignParentTop=&quot;true&quot;
        android:layout_alignParentLeft=&quot;true&quot;
        android:layout_alignParentStart=&quot;true&quot;
        android:layout_alignParentRight=&quot;true&quot;
        android:layout_alignParentEnd=&quot;true&quot; /&gt;

    &lt;Button
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:text=&quot;@string/create_activity&quot;
        android:id=&quot;@+id/createActivityButton&quot;
        android:layout_alignParentBottom=&quot;true&quot;
        android:layout_centerHorizontal=&quot;true&quot;
        android:onClick=&quot;createActivityButtonPressed&quot;/&gt;

    &lt;EditText
        android:id=&quot;@+id/activityType&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_alignLeft=&quot;@+id/createActivityTitle&quot;
        android:layout_alignParentRight=&quot;true&quot;
        android:layout_below=&quot;@+id/createActivityTitle&quot;
        android:layout_marginTop=&quot;27dp&quot;
        android:ems=&quot;10&quot;
        android:hint=&quot;@string/activityTypeHint&quot; &gt;

        &lt;requestFocus /&gt;
    &lt;/EditText&gt;

    &lt;EditText
        android:id=&quot;@+id/activityLocation&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_alignLeft=&quot;@+id/activityType&quot;
        android:layout_alignParentRight=&quot;true&quot;
        android:layout_below=&quot;@+id/activityType&quot;
        android:layout_marginTop=&quot;20dp&quot;
        android:ems=&quot;10&quot;
        android:hint=&quot;@string/activityLocationHint&quot; /&gt;

    &lt;TextView
        android:id=&quot;@+id/distanceLabel&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_marginTop=&quot;50dp&quot;
        android:text=&quot;@string/distanceLabel&quot;
        android:textAppearance=&quot;?android:attr/textAppearanceMedium&quot;
        android:layout_below=&quot;@+id/activityLocation&quot;
        android:layout_alignRight=&quot;@+id/createActivityButton&quot;
        android:layout_alignEnd=&quot;@+id/createActivityButton&quot;
        android:layout_above=&quot;@+id/createActivityButton&quot;
        android:layout_alignLeft=&quot;@+id/createActivityButton&quot;
        android:layout_alignStart=&quot;@+id/createActivityButton&quot; /&gt;

    &lt;NumberPicker
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:id=&quot;@+id/numberPicker&quot;
        android:layout_below=&quot;@+id/activityLocation&quot;
        android:layout_toRightOf=&quot;@+id/createActivityButton&quot;
        android:layout_toEndOf=&quot;@+id/createActivityButton&quot; /&gt;

&lt;/RelativeLayout&gt;</code></pre>
<pre><code class="lang-xml">&lt;resources&gt;
    &lt;string name=&quot;app_name&quot;&gt;Pacemaker&lt;/string&gt;
    &lt;string name=&quot;enter_activity_details&quot;&gt;Enter Activity Details&lt;/string&gt;
    &lt;string name=&quot;activityTypeHint&quot;&gt;Enter Activity type...&lt;/string&gt;
    &lt;string name=&quot;activityLocationHint&quot;&gt;Enter Location...&lt;/string&gt;
    &lt;string name=&quot;distanceLabel&quot;&gt;Distance&lt;/string&gt;
    &lt;string name=&quot;create_activity&quot;&gt;Create Activity&lt;/string&gt;
&lt;/resources&gt;</code></pre>
<p>If we have our naming conventions right - then we can bind to these new controls in onCreate:</p>
<pre><code class="lang-java">    createActivityButton = (Button)       findViewById(R.id.createActivityButton);
    activityType         = (TextView)     findViewById(R.id.activityType);
    activityLocation     = (TextView)     findViewById(R.id.activityLocation);
    distancePicker       = (NumberPicker) findViewById(R.id.numberPicker);</code></pre>
<p>This is the complete CreateActivity class:</p>
<pre><code class="lang-java">package org.pacemaker.pacemaker;

import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.NumberPicker;
import android.widget.TextView;


public class CreateActivity extends AppCompatActivity
{
  private Button       createActivityButton;
  private TextView     activityType;
  private TextView     activityLocation;
  private NumberPicker distancePicker;

  @Override
  protected void onCreate(Bundle savedInstanceState)
  {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_create);

    createActivityButton = (Button)       findViewById(R.id.createActivityButton);
    activityType         = (TextView)     findViewById(R.id.activityType);
    activityLocation     = (TextView)     findViewById(R.id.activityLocation);
    distancePicker       = (NumberPicker) findViewById(R.id.numberPicker);

    Log.v(&quot;Pacemaker&quot;, &quot;got the CreateActivity button&quot;);
  }

  public void createActivityButtonPressed (View view)
  {
    Log.v(&quot;Pacemaker&quot;, &quot;CreateActivity Button Pressed!&quot;);
  }
}</code></pre>
</li>
        
          <li> <h1>NumberPicker</h1>
<p>This is our reference documentation:</p>
<ul>
<li><a href="http://developer.android.com/reference/android/widget/NumberPicker.html">http://developer.android.com/reference/android/widget/NumberPicker.html</a></li>
</ul>
<p>which is a little overwhelming. Back in the guides:</p>
<ul>
<li><a href="http://developer.android.com/guide/components/index.html">http://developer.android.com/guide/components/index.html</a></li>
</ul>
<p>we might find some useful tutorial type introduction to this control - under &#39;User Interface&#39; - &#39;Input Controls&#39;</p>
<ul>
<li><a href="http://developer.android.com/guide/topics/ui/controls.html">http://developer.android.com/guide/topics/ui/controls.html</a></li>
</ul>
<p>.. and this is the page on &#39;pickers&#39;</p>
<ul>
<li><a href="http://developer.android.com/guide/topics/ui/controls/pickers.html">http://developer.android.com/guide/topics/ui/controls/pickers.html</a></li>
</ul>
<p>This documentation is concerned with Fragments - a concept that may be difficult to grasp initially, and also explores the usage of date and time pickers. </p>
<p>We can get up and running without this much fuss. Returning to the documentation, these three methods should be sufficient initially:</p>
<ul>
<li><a href="http://developer.android.com/reference/android/widget/NumberPicker.html#setMaxValue(int)">http://developer.android.com/reference/android/widget/NumberPicker.html#setMaxValue(int)</a></li>
<li><a href="http://developer.android.com/reference/android/widget/NumberPicker.html#setMinValue(int)">http://developer.android.com/reference/android/widget/NumberPicker.html#setMinValue(int)</a></li>
<li><a href="http://developer.android.com/reference/android/widget/NumberPicker.html#getValue()">http://developer.android.com/reference/android/widget/NumberPicker.html#getValue()</a></li>
</ul>
<p>In onCreate, initialise the values: </p>
<pre><code class="lang-java">
    distancePicker.setMinValue(0);
    distancePicker.setMaxValue(20);</code></pre>
<p>And in createActivityButtonPressed:</p>
<pre><code class="lang-java">  public void createActivityButtonPressed (View view) 
  {
    int distance = distancePicker.getValue();
    Log.v(&quot;Pacemaker&quot;, &quot;CreateActivity Button Pressed with &quot; + distance);
  }</code></pre>
<p>Run this now - and verify that it operates as expected (see the actual amounts in the log view).</p>
</li>
        
          <li> <h1>List Activities</h1>
<p>We would like to display the activities we have just created, mirroring the approach taken by the web application:</p>
<p><img src="img/x24.png" alt=""></p>
<p>Select the package containing the CreateActivity class, and create a new activity using the wizard (New-&gt;Android-&gt;Android Activity:</p>
<p><img src="img/a23.png" alt=""></p>
<p>Accept all the defaults, and call the activity ActivitiesList:</p>
<p><img src="img/a25.png" alt=""></p>
<p>In the designer, place a Large Text Field + a ListView (from the Composite panel) directly on to the canvas like this:</p>
<p><img src="img/a26.png" alt=""></p>
<p>Note the names used for the IDs in the Outline view.</p>
</li>
        
          <li> <h1>Activities Model</h1>
<p>Create a new class to represent an individual (user) activity - called MyActivity to avoid interference from the Android Activity namespace:</p>
<pre><code class="lang-java">package org.pacemaker.pacemaker;

import static com.google.common.base.Objects.toStringHelper;
import com.google.common.base.Objects;

public class MyActivity
{
  public Long   id;
  public String type;
  public String location;
  public double distance;

  public MyActivity()
  {
  }

  public MyActivity(String type, String location, double distance)
  {
    this.type      = type;
    this.location  = location;
    this.distance  = distance;
  }

  @Override
  public String toString()
  {
    return toStringHelper(this).addValue(id)
        .addValue(type)
        .addValue(location)
        .addValue(distance)
        .toString();
  }

  @Override
  public boolean equals(final Object obj)
  {
    if (obj instanceof MyActivity)
    {
      final MyActivity other = (MyActivity) obj;
      return Objects.equal(type, other.type)
          &amp;&amp; Objects.equal(location,  other.location)
          &amp;&amp; Objects.equal(distance,  other.distance);
    }
    else
    {
      return false;
    }
  }

  @Override
  public int hashCode()
  {
    return Objects.hashCode(this.id, this.type, this.location, this.distance);
  }
}</code></pre>
<p>This use the guava library for utility support:</p>
<ul>
<li><a href="https://code.google.com/p/guava-libraries/">https://code.google.com/p/guava-libraries/</a></li>
</ul>
<p>To include this in your project, you need to edit <code>build.gradle</code> and include guava as an additional dependency:</p>
<pre><code>dependencies {
    compile fileTree(dir: &#39;libs&#39;, include: [&#39;*.jar&#39;])
    testCompile &#39;junit:junit:4.12&#39;
    compile &#39;com.android.support:appcompat-v7:23.1.1&#39;
    compile group: &#39;com.google.guava&#39;, name: &#39;guava&#39;, version: &#39;18.0&#39;
}</code></pre>
<p>Back in the CreateActivity, we might create a list to store the activities:</p>
<pre><code class="lang-java">  private List&lt;MyActivity&gt; activities = new ArrayList&lt;MyActivity&gt;();</code></pre>
<p>...and populate this list in createActivityButtonPressed:</p>
<pre><code class="lang-java">  public void createActivityButtonPressed (View view) 
  {  
    double distance = distancePicker.getValue();
    MyActivity activity = new MyActivity (activityType.getText().toString(), activityLocation.getText().toString(), distance);

    activities.add(activity);
    Log.v(&quot;Pacemaker&quot;, &quot;CreateActivity Button Pressed with &quot; + distance);
  }</code></pre>
</li>
        
          <li> <h1>Rendering the Activities</h1>
<p>Place a new button on the CreateAvtivity panel to trigger the display of the activities list:</p>
<p><img src="img/a27.png" alt=""></p>
<p>... and install an event handler for this button:</p>
<pre><code class="lang-java">  public void listActivityButtonPressed (View view) 
  {
    Log.v(&quot;Pacemaker&quot;, &quot;List Activities Button Pressed&quot;);
  }</code></pre>
<p>Manually &#39;wire-up&#39; the event handler by inserting the appropriate entry in the layout file:</p>
<pre><code class="lang-xml">    &lt;Button
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:text=&quot;@string/list_activities&quot;
        android:id=&quot;@+id/listActivitiesButton&quot;
        android:layout_alignParentBottom=&quot;true&quot;
        android:layout_alignRight=&quot;@+id/createActivityButton&quot;
        android:layout_alignEnd=&quot;@+id/createActivityButton&quot;
        android:layout_alignLeft=&quot;@+id/createActivityButton&quot;
        android:onClick=&quot;listActivityButtonPressed&quot;
        android:layout_alignStart=&quot;@+id/createActivityButton&quot;/&gt;</code></pre>
<p>(second last entry)</p>
<p>To switch views, we start a new activity with the correct intent:</p>
<pre><code>  public void listActivityButtonPressed (View view) 
  {
    Log.v(&quot;Pacemaker&quot;, &quot;List Activityies Button Pressed&quot;);
    Intent intent = new Intent(this, ActivitiesList.class);
    startActivity (intent);
  }</code></pre>
</li>
        
          <li> <h1>Exercises</h1>
<p>Archive of lab so far:</p>
<ul>
<li><a href="https://github.com/wit-design-patterns-2016/pacemaker-android/releases/tag/V1">https://github.com/wit-design-patterns-2016/pacemaker-android/releases/tag/V1</a></li>
</ul>
<h2>Exercise 1:</h2>
<p>We have a list of activities in the CreateActivity class:</p>
<pre><code class="lang-java">  private ArrayList&lt;MyActivity&gt; activities = new ArrayList&lt;MyActivity&gt;();</code></pre>
<p>Which is populated in the button event handler:</p>
<pre><code class="lang-java">  public void createActivityButtonPressed (View view) 
  {  
    double distance = distancePicker.getValue();
    Activity activity = new MyActivity (activityType.getText().toString(), activityLocation.getText().toString(), distance);

    activities.add(activity);
    Log.v(&quot;Pacemaker&quot;, &quot;CreateActivity Button Pressed with &quot; + distance);
  }</code></pre>
<p>How do we display this in the ActivityList?</p>
<pre><code class="lang-java">public class ActivitiesList extends Activity
{

  @Override
  protected void onCreate(Bundle savedInstanceState)
  {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activities_list);
  }
}</code></pre>
<p>To populate the array - you will need to use an adapter:</p>
<ul>
<li><a href="http://stackoverflow.com/questions/8166497/custom-adapter-for-list-view">http://stackoverflow.com/questions/8166497/custom-adapter-for-list-view</a></li>
</ul>
<p>This is a example of the adapter pattern:</p>
<ul>
<li><a href="https://sourcemaking.com/design_patterns/adapter">https://sourcemaking.com/design_patterns/adapter</a></li>
</ul>
<p>But you will need to find a way of getting the arraylist of activities to the view. One technique is based on the memento pattern:</p>
<ul>
<li><a href="https://sourcemaking.com/design_patterns/memento">https://sourcemaking.com/design_patterns/memento</a></li>
</ul>
<p>In android, this technique is implemented using the Parcelable class:</p>
<ul>
<li><a href="http://developer.android.com/reference/android/os/Parcelable.html">http://developer.android.com/reference/android/os/Parcelable.html</a></li>
</ul>
<p>See if you can have the list of activities displayed in the ActivitiesList view. </p>
<p>The next lab will go though both options in solving this problem.</p>
</li>
        
      </ul>
    </div>

    <script>
      $(document).ready(function() {
  const $images = $('.lab img');
  jQuery.each($images, function(i) {
    if ($images[i].alt.length > 0) {
      const divImg = $(document.createElement('div')).addClass('');
      $($images[i]).wrap(divImg);
      const divLabel = $(document.createElement('div')).addClass('uk-label uk-text-lowercase');
      divLabel.append($images[i].alt);
      $(divLabel).insertAfter($images[i]);
      $('<br>').insertAfter($images[i]);
    }
  });
});

    </script>
  </body>
</html>